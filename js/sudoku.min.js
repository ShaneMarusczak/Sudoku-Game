(()=>{function h(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function C(a){return new Promise(b=>setTimeout(b,a))}function t(a,b,c){const d=new Date;d.setTime(d.getTime()+864E5*c);c="expires="+d.toUTCString();document.cookie=a+"="+b+";"+c+";path=/;SameSite=Lax"}function y(a){a+="=";const b=decodeURIComponent(document.cookie).split(";");for(let c=0;c<b.length;c++){let d=b[c];for(;" "===d.charAt(0);)d=d.substring(1);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return""}function u(a,
b){const c=document.createElement("div");c.id="modal-box";const d=document.createElement("div");d.id="inner-modal-box";const e=document.createElement("span");e.id="modal-message";d.appendChild(e);c.appendChild(d);e.innerText=a;document.getElementsByTagName("html")[0].appendChild(c);C(b).then(()=>c.remove())}function K(a){const b=document.createElement("div");b.id="modal-box";const c=document.createElement("div");c.id="inner-modal-box";const d=document.createElement("span");d.id="modal-message";const e=
document.createElement("span");e.id="close-button";e.innerHTML="&times;";c.appendChild(d);c.appendChild(e);b.appendChild(c);d.innerText=a;document.getElementsByTagName("html")[0].appendChild(b);e.addEventListener("click",()=>{b.remove()})}function L(a){var b=document.activeElement;if(b.classList.contains("arrow-nav")){var c=Number(b.getAttribute("row"));b=Number(b.getAttribute("col"));switch(a.key){case "ArrowUp":a.preventDefault();if(0>c-1)break;document.getElementById("s"+(c-1)+b).focus();break;
case "ArrowDown":a.preventDefault();if(9<=c+1)break;document.getElementById("s"+(c+1)+b).focus();break;case "ArrowLeft":a.preventDefault();if(0>b-1)break;document.getElementById("s"+c+(b-1)).focus();break;case "ArrowRight":a.preventDefault(),9<=b+1||document.getElementById("s"+c+(b+1)).focus()}}}let z;const f=[];let n=0,m=0,p=0,D,A=!1,q=!1,E=!1;const M=document.getElementById("sudoku"),N=document.getElementById("timerContainer"),B=document.getElementById("hideTimer"),r=document.getElementById("timer"),
v=[],w=[],O={easy:1,hard:3,insane:5,medium:2},F=()=>{n++;60<=n&&(n=0,m++,60<=m&&(m=0,p++));r.textContent=(p?9<p?p:"0"+p:"00")+":"+(m?9<m?m:"0"+m:"00")+":"+(9<n?n:"0"+n);z=setTimeout(F,1E3)},P=a=>Array.from(document.getElementsByName(a)).find(b=>"radio"===b.type&&b.checked),Q=()=>{if(!q)if(Array.from(document.getElementsByName("difficulty")).some(a=>a.checked)){D=P("difficulty");f[0][0]=h(1,9);f[1][7]=h(1,9);f[2][4]=h(1,9);f[3][3]=h(1,9);f[4][1]=h(1,9);f[5][8]=h(1,9);f[6][6]=h(1,9);f[7][2]=h(1,9);
f[8][5]=h(1,9);G(v);for(let a=0;9>a;a++)for(let b=0;9>b;b++)document.getElementById("s"+a+b).readOnly=!1,0===h(0,O[D.value])?(document.getElementById("s"+a+b).value=v[a][b],document.getElementById("s"+a+b).readOnly=!0):document.getElementById("no"+a+b).classList.remove("hide");q=!0;document.getElementById("usedNums").classList.remove("hide");document.getElementById("difficultySelect").classList.add("hide");document.getElementById("introText").classList.add("hide");r.classList.remove("hide");N.classList.remove("hide");
z=setTimeout(F,1E3)}else u("Select a difficulty",1600)},U=()=>{if(q&&!E)if(R()){for(var a=0;9>a;a++)for(var b=0;9>b;b++)w[a][b]=document.getElementById("s"+a+b).value;a=S(w);if(0!==a.length)u("Sorry, incorrect!",1500),a.forEach(c=>{const [d,e]=c;document.getElementById("s"+e+d).style.background="red"});else{clearTimeout(z);u("Correct!",2E3);for(a=0;9>a;a++)for(b=0;9>b;b++)document.getElementById("s"+a+b).readOnly=!0;B.checked||C(2E3).then(()=>K("Completed in "+r.textContent));T();E=!0}}else u("Sorry, incorrect!",
1500)},T=()=>{for(let a=0;9>a;a++)for(let b=0;9>b;b++)document.getElementById("s"+a+b).style.background="darkseagreen"},R=()=>{const a="123456789".split("");for(let b=0;9>b;b++)for(let c=0;9>c;c++)if(!a.includes(document.getElementById("s"+b+c).value))return!1;return!0},S=a=>{const b=[];for(let c=0;9>c;c++)for(let d=0;9>d;d++)H(c,d,a[c][d],a,!0)||b.push([d,c]);return b},G=a=>{if(!A){for(var b=0;9>b;b++)for(var c=0;9>c;c++)if(""===f[b][c]){for(let d=1;10>d&&!A;d++)H(b,c,d,f,!1)&&(f[b][c]=d,G(a),f[b][c]=
"");return}A=!0;for(b=0;9>b;b++)for(c=0;9>c;c++)a[b][c]=f[b][c]}},H=(a,b,c,d,e)=>{for(var g=0;9>g;g++)if(d[a][g]===c&&(g!==b||!e))return!1;for(g=0;9>g;g++)if(d[g][b]===c&&(g!==a||!e))return!1;g=3*Math.floor(b/3);const k=3*Math.floor(a/3);for(let l=0;3>l;l++)for(let x=0;3>x;x++)if(d[k+l][g+x]===c&&(k+l!==a||g+x!==b||!e))return!1;return!0},V=a=>{const b=document.getElementById("n"+a.target.id.substring(2));b.classList.contains("hide")&&q&&!0!==document.getElementById("s"+a.target.id.substring(2)).readOnly?
(b.classList.remove("hide"),b.focus(),document.getElementById("no"+a.target.id.substring(2)).innerHTML="\u00ab"):(b.classList.add("hide"),document.getElementById("no"+a.target.id.substring(2)).innerHTML="\u00bb")},W=a=>{q&&"SPAN"!==a.target.tagName&&"DIV"!==a.target.tagName&&!0!==document.getElementById("s"+a.target.id.substring(1)).readOnly&&document.getElementById("no"+a.target.id.substring(1)).classList.add("opaque")},X=a=>{document.getElementById("no"+a.target.id.substring(2)).classList.remove("opaque")},
Y=()=>{const a={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};for(var b=0;9>b;b++)for(let c=0;9>c;c++)a[document.getElementById("s"+b+c).value]++;for(b=1;10>b;b++)9<=a[b.toString()]?document.getElementById("used"+b).classList.remove("hide"):document.getElementById("used"+b).classList.add("hide")},aa=()=>{"false"===y("largeBoard")?(Z(),t("largeBoard","true",10)):(I(),t("largeBoard","false",10))},I=()=>{document.querySelectorAll("input[type=number]").forEach(a=>a.classList.add("textInputToggle"));document.querySelectorAll(".oddRight").forEach(a=>
a.classList.add("oddRightToggle"));document.querySelectorAll(".strangeRight").forEach(a=>a.classList.add("strangeRightToggle"));document.querySelectorAll("textarea").forEach(a=>a.classList.add("textareaToggle"));document.querySelectorAll(".noteOpenDiv").forEach(a=>a.classList.add("noteOpenDivToggle"))},Z=()=>{document.querySelectorAll("input[type=number]").forEach(a=>a.classList.remove("textInputToggle"));document.querySelectorAll(".oddRight").forEach(a=>a.classList.remove("oddRightToggle"));document.querySelectorAll(".strangeRight").forEach(a=>
a.classList.remove("strangeRightToggle"));document.querySelectorAll("textarea").forEach(a=>a.classList.remove("textareaToggle"));document.querySelectorAll(".noteOpenDiv").forEach(a=>a.classList.remove("noteOpenDivToggle"))},J=()=>{B.checked?(r.classList.add("invsible"),t("hideSudokuTimer","Y",30)):(r.classList.remove("invsible"),t("hideSudokuTimer","N",30))};(()=>{document.getElementById("start").addEventListener("click",Q);document.getElementById("hideTimer").addEventListener("click",J);document.getElementById("checkAnswer").addEventListener("click",
U);document.getElementById("toggleSize").addEventListener("click",aa);document.addEventListener("keydown",L);for(let a=0;9>a;a++){f.push([]);v.push([]);w.push([]);const b=document.createElement("div");b.classList.add("entryRow");M.appendChild(b);for(let c=0;9>c;c++){w[a][c]="";f[a][c]="";v[a][c]="";const d=document.createElement("div"),e=document.createElement("input"),g=document.createElement("textarea"),k=document.createElement("span"),l=document.createElement("div");k.innerHTML="\u00bb";k.classList.add("hide");
g.classList.add("hide");d.id="ed"+a+c;g.id="n"+a+c;e.id="s"+a+c;k.id="no"+a+c;e.readOnly=!0;e.type="number";e.maxLength=1;e.classList.add("arrow-nav");e.addEventListener("input",Y);e.setAttribute("row",a.toString());e.setAttribute("col",c.toString());d.classList.add("entryDiv");l.classList.add("noteOpenDiv");d.addEventListener("mouseover",W);d.addEventListener("mouseleave",X);d.appendChild(e);d.appendChild(g);l.appendChild(k);d.appendChild(l);k.addEventListener("click",V);b.appendChild(d);2===c||
5===c?(e.classList.add("rightBorder"),d.classList.add("strangeRight")):d.classList.add("oddRight");2!==a&&5!==a||e.classList.add("bottomBorder")}}"false"===y("largeBoard")&&I();B.checked="Y"===y("hideSudokuTimer");J()})()})();
